<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Quick start</title>
  <meta name="generator" content="Clay (http://lucuma.github.com/Clay/)">
  <meta name="description" content="">
  <link href="theme/styles/styles.css" media="screen" rel="stylesheet">
  <link href="theme/styles/pygments-friendly.css" rel="stylesheet">
</head>
<body>
  <script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-1495972-14']); _gaq.push(['_trackPageview']);</script><script src="http://www.google-analytics.com/ga.js" async></script>
  <header id="sidebar">
    <h1 id="project_name"><a href="index.html">Moar</a></h1>
    <h2 id="tagline">On-the-fly image thumbnailer with no strings attached.</h2>

    <div class="docversions">
      <select onchange="location.href=this.value;">
        <option value="http://lucuma.github.io/moar/">Latest release (1.x)</option>
        <option value="http://lucuma.github.io/moar/0.5/">Version 0.5</option>
      </select>
    </div>

    <div id="links">  
      
  <span class="link toc">
    <a href="index.html#table-of-contents">table of contents</a>
  </span>

      <span class="link github"><a href="https://github.com/lucuma/moar">github</a></span>
      <span class="link email"><a href="mailto:juanpablo@lucumalabs.com?subject=hi">say hello</a></span>
    </div>
  </header>

  <section id="river">
    <article class="post">
      

      <h1 id="quick-start">Quick start</h1>
<p>First, define a thumbnailer to use with the images base path and base URL:</p>
<pre><code class="language-python"><span class="kn">from</span> <span class="nn">moar</span> <span class="kn">import</span> <span class="n">Thumbnailer</span>

<span class="n">thumbnail</span> <span class="o">=</span> <span class="n">Thumbnailer</span><span class="p">(</span><span class="n">MEDIA_PATH</span><span class="p">,</span> <span class="n">MEDIA_URL</span><span class="p">)</span>
</code></pre>


<p>Then, make it accesible in your templates. For instance, as a jinja2 global:</p>
<pre><code class="language-python"><span class="n">render</span><span class="o">.</span><span class="n">set_global</span><span class="p">(</span><span class="s">&#39;thumbnail&#39;</span><span class="p">,</span> <span class="n">thumbnail</span><span class="p">)</span>
</code></pre>


<p>Finally, you call it from your code:</p>
<pre><code class="language-jinja"><span class="x">&lt;img src=&quot;</span><span class="cp">{{</span> <span class="nv">thumbnail</span><span class="o">(</span><span class="nv">item.image</span><span class="o">,</span> <span class="s1">&#39;100x100&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x">&quot; /&gt;</span>
</code></pre>


<p>or like this:</p>
<pre><code class="language-jinja"><span class="cp">{%</span> <span class="k">with</span> <span class="nv">t</span> <span class="o">=</span> <span class="nv">thumbnail</span><span class="o">(</span><span class="nv">image</span><span class="o">,</span> <span class="s1">&#39;100x100&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">&lt;img src=&quot;</span><span class="cp">{{</span> <span class="nv">t.url</span> <span class="cp">}}</span><span class="x">&quot; width=&quot;</span><span class="cp">{{</span> <span class="nv">t.width</span> <span class="cp">}}</span><span class="x">&quot; height=&quot;</span><span class="cp">{{</span> <span class="nv">t.heigth</span> <span class="cp">}}</span><span class="x">&quot; /&gt;</span>
<span class="cp">{%</span> <span class="k">endwith</span> <span class="cp">%}</span><span class="x"></span>
</code></pre>


<p>The <code>image</code> argument is a relative file path of the local image.</p>
<p>The <code>geometry</code> argument is the desired width and/or height of the image thumbnail.</p>
<p>The function also takes several other parameters describing further processing like cropping, rotating, etc.<br>
See the <a href="thumbnail.html">thumbnail</a> section for the available options.</p>
<p>The output of the thumbnailer is an object similar to this:</p>
<pre><code class="language-python"><span class="k">class</span> <span class="nc">Thumb</span><span class="p">:</span>
    <span class="n">url</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">absolute</span> <span class="n">URL</span> <span class="n">of</span> <span class="n">the</span> <span class="n">thumbnail</span><span class="o">&gt;</span>
    <span class="n">width</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">thumbnail</span> <span class="n">width</span><span class="o">&gt;</span>
    <span class="n">height</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">thumbnail</span> <span class="n">height</span><span class="o">&gt;</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span>
</code></pre>


<p>You can invoke it from your templates or directly from your python code, when you want generate the thumbnail right away.</p>
<pre><code class="language-python"><span class="o">&gt;&gt;&gt;</span> <span class="n">thumbnailer</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span>
<span class="o">&gt;&gt;&gt;</span>   <span class="s">u&#39;/var/www/example/static/media&#39;</span><span class="p">,</span>
<span class="o">&gt;&gt;&gt;</span>   <span class="s">u&#39;<a href="http://media.example.org&#39;">http://media.example.org&#39;</a></span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="n">thumbnailer</span><span class="p">(</span><span class="s">&#39;foobar/my_file.jpg&#39;</span><span class="p">,</span> <span class="s">&#39;100x100&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>

<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">media</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="n">t</span><span class="o">/</span><span class="n">my_file</span><span class="o">-</span><span class="mi">23</span><span class="n">af38</span><span class="o">.</span><span class="n">jpg</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

<span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
</code></pre>
    </article>
    
<nav class="pagination">
  <span class="prev"><a href="installation.html">Anterior</a></span>
  <span class="back_to_index">
    <a href="index.html">Home</a>
  </span>
  <span class="next"><a href="thumbnail.html">Siguiente</a></span>
</nav>

  </section>
</body>
</html>