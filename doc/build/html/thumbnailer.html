<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Thumbnailer class</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="generator" content="clay.lucumalabs.com">
  <meta name="description" content="">
  <link href="styles/styles.css" media="screen" rel="stylesheet">
  <link href="styles/pygments/friendly.css" rel="stylesheet">
</head>
<body>
  <script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-1495972-14']); _gaq.push(['_trackPageview']);</script><script src="http://www.google-analytics.com/ga.js" async></script>
  <header id="sidebar">
    <aside id="logo" class="clearfix">
      <a href="index.html">Moar</a>
    </aside>
    <ul id="user_meta">
      <li class="project_name">
        <h1 id="project_name">
          <a href="index.html">Moar <i>thumbnails</i></a>
        </h1>
      </li>
      <!--li class="project_owner">
        <h2 id="project_owner">
          <a href="http://lucumalabs.com"></a>
        </h2>
      </li-->
      <li class="tagline">
        <h2 id="tagline">On-the-fly image thumbnailer with no strings attached.</h2>
      </li>
      
  <li class="link toc">
    <a href="index.html#table-of-contents">table of contents</a>
  </li>

      <li class="link github">
        <a href="https://github.com/lucuma/moar">github</a>
      </li>
      <li class="link email">
        <a href="mailto:juanpablo@lucumalabs.com?subject=hi">say hello</a>
      </li>
    </ul>
  </header>

  <section id="river">
  
  <article class="post">
    <h1 id="thumbnailer-class"><a class="toclink" href="#thumbnailer-class">Thumbnailer class</a></h1>
<p>Syntax:</p>
<p><pre><code class="highlight python"><span class="kn">from</span> <span class="nn">moar</span> <span class="kn">import</span> <span class="n">Thumbnailer</span>

<span class="n">thumbnail</span> <span class="o">=</span> <span class="n">Thumbnailer</span><span class="p">([</span><span class="n">engine</span><span class="p">],</span> <span class="p">[</span><span class="n">storage</span><span class="p">],</span>
                <span class="p">[</span><span class="n">filters</span><span class="o">=</span><span class="n">extra_filters</span><span class="p">],</span> <span class="p">[</span><span class="o">**</span><span class="n">default_options</span><span class="p">])</span>
</code></pre></p>
<p>Moar come with support for pluggable engines and storages. By default it use <code>moar.engines.pil.Engine</code> and <code>moar.storages.filesystem.Storage</code>.</p>
<p>When you call the thumbnail instance, the current storage class will generates a key that represent a thumbnail made from that image with that specific filters and options. If a thumbnail with that key hasn't been generated before, it'll make a new one, store it using the key as an id, and returns it.</p>
<p>The default storage class (<code>moar.storages.filesystem.Storage</code>) store the generated thumbnails inside a <code>"t"</code> folder in the same path as the source image (this can be changed). Other storages will operate different, for example, storing the key in a local database and uploading the thumbnail to a remote server.</p>
<h2 id="filters"><a class="toclink" href="#filters">Filters</a></h2>
<p>You can use the <code>filters</code> parameter to define a list of custom filters, adding them to those included by default. E.g.:</p>
<p><pre><code class="highlight python"><span class="kn">from</span> <span class="nn">image_filters</span> <span class="kn">import</span> <span class="n">watermak</span><span class="p">,</span> <span class="n">enhace</span>

<span class="n">thumbnail</span> <span class="o">=</span> <span class="n">Thumbnailer</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="p">[</span><span class="n">watermak</span><span class="p">,</span> <span class="n">enhace</span><span class="p">])</span>
</code></pre></p>
<div class=note>

<p>The filters has to have a method named after the current engine (eg: <code>"wand"</code> or <code>"pil"</code>) or the'll be unusable. See the "<a href="extending.html#filters">extending the library</a>" section for more details.</p>
</div>

<h2 id="default-options"><a class="toclink" href="#default-options">Default Options</a></h2>
<p>These options are the default for all thumbnails. However, they can be overwritten in individual <code>thumbnail</code> calls.</p>
<p><dl>
<dt>upscale</dt>
<dd>Upscale is a boolean that controls if the image can be upscaled or not. For example if your source is <code>"100x100"</code> and you request a thumbnail of size <code>"200x200"</code> and upscale is <code>False</code> this will return a thumbnail of size 100x100. If upscale were <code>True</code> this would result in a thumbnail size <code>"200x200"</code> (upscaled). The default value is <code>True</code>.</dd>
<dt>quality</dt>
<dd>When the output format is jpeg, quality is a value between 0-100 that controls the thumbnail write quality. Default value is <code>90</code>.</dd>
<dt>progressive</dt>
<dd>This controls whether to save jpeg thumbnails as progressive jpegs. Default value is <code>True</code>.</dd>
<dt>orientation</dt>
<dd>This controls whether to orientate the resulting thumbnail with respect to the source EXIF tags for orientation. Default value is <code>True</code>.</dd>
<dt>format</dt>
<dd>This controls the write format and thumbnail extension. Formats supported by the shipped engines are <code>"JPEG"</code> and <code>"PNG"</code>. Default value is <code>"JPEG"</code>.</dd>
<dt>resize</dt>
<dd>When setting the new geometry, this controls if the image is deformed to match exactly the given dimensions, regardless of the aspect ratio of the original image. If <code>resize</code> is <code>True</code>, the <code>upscale</code> option is ignored. Default value is <code>False</code>.</dd>
</dl></p>
  </article>
  <nav class="pagination">
    <span class="prev"><a href="thumbnail.html">Thumbnail generation</a></span>
    <span class="back_to_index">
      <a href="index.html">Home</a>
    </span>
    <span class="next"></span>
  </nav>

  </section>

  <script data-cfasync="false" src="scripts/jquery-1.8.0.min.js"></script>
  <script src="scripts/scripts.js"></script>
</body>
</html>