<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Thumbnail generation</title>
  <meta name="generator" content="Clay (http://lucuma.github.com/Clay/)">
  <meta name="description" content="">
  <link href="../theme/styles/styles.css" media="screen" rel="stylesheet">
  <link href="../theme/styles/pygments-friendly.css" rel="stylesheet">
</head>
<body>
  <script>var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-1495972-14']); _gaq.push(['_trackPageview']);</script><script src="http://www.google-analytics.com/ga.js" async></script>
  <header id="sidebar">
    <h1 id="project_name"><a href="../index.html">Moar</a></h1>
    <h2 id="tagline">On-the-fly image thumbnailer with no strings attached.</h2>

    <div class="docversions">
      <select onchange="location.href=this.value;">
        <option value="http://lucuma.github.io/moar/">Latest release (1.x)</option>
        <option value="http://lucuma.github.io/moar/0.5/" selected="selected">Version 0.5</option>
      </select>
    </div>

    <div id="links">  
      
  <span class="link toc">
    <a href="../0.5/index.html#table-of-contents">table of contents</a>
  </span>

      <span class="link github"><a href="https://github.com/lucuma/moar">github</a></span>
      <span class="link email"><a href="mailto:juanpablo@lucumalabs.com?subject=hi">say hello</a></span>
    </div>
  </header>

  <section id="river">
    <article class="post">
      <div class="docversion note">
        <p>This documentation is for the older, 0.5 version of the library. The newest documentation is <a href="../index.html">here</a>.</p>
      </div>

      <h1 id="thumbnail-generation">Thumbnail generation</h1>
<p>Syntax:</p>
<pre><code class="language-python"><span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">geometry</span><span class="p">,</span> <span class="p">(</span><span class="n">key1</span><span class="p">,</span> <span class="n">value1</span><span class="p">),</span> <span class="p">(</span><span class="n">key2</span><span class="p">,</span> <span class="n">value2</span><span class="p">),</span> <span class="o">...</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre>


<p>The <code>thumbnail</code> function takes a source image, a geometry parameter, a number of optionals filters as tuples and/or a number of custom options (the same ones of the <a href="../0.5/thumbnailer.html">Thumbnailer</a> class), and returns the URL of the generated thumbnail.</p>
<pre><code class="language-jinja"><span class="x">&lt;img src=&quot;</span><span class="cp">{{</span> <span class="nv">thumbnail</span><span class="o">(</span> <span class="err">...</span> <span class="o">)</span> <span class="cp">}}</span><span class="x">&quot; /&gt;</span>
</code></pre>


<h2 id="source">Source</h2>
<p>Source must be a local image represented as an object or a dictionary with the following attributes or keys:</p>
<dl>
<dt>path</dt>
<dd>absolute path to the image, including it's name.<br>
Eg: <code>/var/example.com/media/2012/05/05/lena.jpg</code>.</dd>
<dt>url</dt>
<dd>URL to the container of the images, either absolute or relative to the domain.<br>
Eg: <code><a href="http://lucumalabs.com/media/2012/05/05/lena.jpg">http://lucumalabs.com/media/2012/05/05/lena.jpg</a></code>, <code>/media/2012/05/05/lena.jpg</code>.</dd>
</dl>
<div class="admonition note">
<p>Some python web frameworks (like Django) use image objects with both of these attributes.</p>
</div>
<h2 id="geometry">Geometry</h2>
<p>Geometry is specified as <code>width</code>x<code>height</code>, <code>width</code> or x<code>height</code>.<br>
Width and height are in pixels. </p>
<p>This value can either be a string or a callable that return a valid geometry string. Examples:</p>
<pre><code class="language-python"><span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">)</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200&#39;</span><span class="p">)</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;x100&#39;</span><span class="p">)</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">get_geometry</span><span class="p">)</span>
</code></pre>


<p>If both width and height are given, the image is rescaled to the maximum size that fits in a width x height box, preserving the aspect ratio. </p>
<p>If the <code>resize</code> option is <code>True</code>, however, the image is deformed to match exactly the given dimensions,</p>
<p>If the geometry is <code>None</code> or an empty string, no rescaling will be applied.</p>
<h2 id="filters">Filters</h2>
<p>The filters are defined as a sequence of list or tuples.</p>
<pre><code>['filter1', value], ['filter2', value1, value2], ['filter3'] ...
</code></pre>
<p>They are defined this way instead of using keyword arguments because the order in which are applied could matter.</p>
<p>The filters described below are those available in the shipped engines, but you can easily add more (see the section "<a href="../0.5/extending.html#filters">extending the library</a>" for more info about that).</p>
<h3 id="crop-width-height-x0-y0">crop (width, height, x=0, y=0)</h3>
<p>Crop accepts a width, height and one or two optional values as the coordinates of the new top-left corner (<code>(0, 0)</code> by default). These last values can be integers (pixels), percentages or 'center'.</p>
<p>For example, some valid values are:</p>
<pre><code class="language-python"><span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;crop&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;crop&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="s">&#39;15%&#39;</span><span class="p">,</span> <span class="s">&#39;10%&#39;</span><span class="p">])</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;crop&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">50</span><span class="p">])</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;crop&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;crop&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="s">&#39;center&#39;</span><span class="p">])</span>
</code></pre>


<h3 id="grayscale">grayscale</h3>
<p>If you include this filter it will turn the image into gray-scale.</p>
<p>Example:</p>
<pre><code class="language-python"><span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;grayscale&#39;</span><span class="p">])</span>
</code></pre>


<h3 id="sepia-tonefff0c0">sepia (tone='#fff0c0')</h3>
<p>This filter will turn your image into sepia tones, making it looks like an old photo.</p>
<p>The interesting trick about sepia images is that they are just gray-scale pictures with a different color palette. In this case the default sepia tone is #fff0c0.</p>
<p>If you would want to change it, the tone can be expressed as a RGB list of values or like an hex string.</p>
<p>Examples:</p>
<pre><code class="language-python"><span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;sepia&#39;</span><span class="p">])</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;sepia&#39;</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">240</span><span class="p">,</span> <span class="mi">192</span><span class="p">])</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;sepia&#39;</span><span class="p">,</span> <span class="s">&#39;#fff0c0&#39;</span><span class="p">])</span>
</code></pre>


<h3 id="rotate-degrees">rotate (degrees)</h3>
<p>Rotates the image counter-clockwise by a specified number of degrees. If degrees is negative, the rotation it's clockwise instead.</p>
<p>Example:</p>
<pre><code class="language-python"><span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;rotate&#39;</span><span class="p">,</span> <span class="mi">45</span><span class="p">])</span>
<span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;rotate&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">])</span>
</code></pre>


<h3 id="blur-radius2">blur (radius=2)</h3>
<p>Apply a gaussian blur (smoothing) to the image. The <code>radius</code> argument determines the scale of fine detail that will be removed. Low values remove only very fine detail while high values remove larger levels of detail.</p>
<p>Example:</p>
<pre><code class="language-python"><span class="n">thumbnail</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="s">&#39;200x100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;blur&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</code></pre>


<h2 id="options">Options</h2>
<p>The options overwrite the default ones defined in the <a href="../0.5/thumbnailer.html">Thumbnailer</a> class.</p>
<p><dl>
<dt>resize</dt>
<dd>When setting the new geometry, this controls if the image is deformed<br>
to match exactly the given dimensions, regardless of the aspect ratio<br>
of the original image.<br>
This can be <code>fill</code>, <code>fit</code> or <code>upscale</code>.<br>
Default value is <code>fill</code>.</dd>
<dt>upscale</dt>
<dd>A boolean that controls if the image can be upscaled or not.<br>
For example if your source is <code>100x100</code> and you request a thumbnail<br>
of size <code>200x200</code> and upscale is <code>False</code> this will return a<br>
thumbnail of size 100x100.<br>
If upscale were <code>True</code> this would result in a thumbnail size<br>
<code>200x200</code> (upscaled).<br>
The default value is <code>True</code>.</dd>
<dt>format</dt>
<dd>This controls the write format and thumbnail extension. Formats<br>
supported by the shipped engines are <code>'JPEG'</code> and <code>'PNG'</code>.<br>
Default value is <code>'JPEG'</code>.</dd>
<dt>quality</dt>
<dd>When the output format is jpeg, quality is a value between 0-100<br>
that controls the thumbnail write quality.<br>
Default value is <code>90</code>.</dd>
<dt>progressive</dt>
<dd>This controls whether to save jpeg thumbnails as progressive jpegs.<br>
Default value is <code>True</code>.</dd>
<dt>orientation</dt>
<dd>This controls whether to orientate the resulting thumbnail with<br>
respect to the source EXIF tags for orientation.<br>
Default value is <code>True</code>.</dd>
</dl></p>
    </article>
    
<nav class="pagination">
  <span class="prev"><a href="../0.5/quickstart.html">Anterior</a></span>
  <span class="back_to_index">
    <a href="../0.5/index.html">Home</a>
  </span>
  <span class="next"><a href="../0.5/thumbnailer.html">Siguiente</a></span>
</nav>

  </section>
</body>
</html>